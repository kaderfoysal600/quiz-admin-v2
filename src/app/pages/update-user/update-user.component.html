<div class="container">
  <div class="login-main">
    <div class="login">
      <div class="update-top">
        <a routerLink="/list-user">Go Back</a>
        <h1>Update User</h1>
      </div>

      <form class="login-form" [formGroup]="loginForm" (ngSubmit)="onUpdate()">

        <div class="login-from-inputs">
          <mat-form-field class="mat-data-input-field" appearance="outline">
            <mat-label>First Name</mat-label>
            <input type="text" formControlName="first_name" matInput placeholder="Enter your first name...">
            <mat-icon matSuffix>person</mat-icon>
            <mat-error>This field is required</mat-error>
          </mat-form-field>

          <mat-form-field class="mat-data-input-field" appearance="outline">
            <mat-label>Last Name</mat-label>
            <input type="text" formControlName="last_name" matInput placeholder="Enter your last name...">
            <mat-icon matSuffix>person</mat-icon>
            <mat-error>This field is required</mat-error>
          </mat-form-field>

          <mat-form-field class="mat-data-input-field" appearance="outline">
            <mat-label>mobile</mat-label>
            <input type="number" formControlName="mobile" matInput placeholder="Enter your mobile number...">
            <mat-icon matSuffix>person</mat-icon>
            <mat-error>This field is required</mat-error>
          </mat-form-field>

            
            <mat-form-field class="mat-data-input-field" appearance="outline">
              <mat-label>Username</mat-label>
              <input type="email" formControlName="email" matInput placeholder="Enter your email...">
              <mat-icon matSuffix>person</mat-icon>
            </mat-form-field>


          <mat-form-field class="mat-data-input-field" appearance="outline">
            <mat-label>Address</mat-label>
            <input type="text" formControlName="address" matInput placeholder="Enter your address...">
            <mat-icon matSuffix>person</mat-icon>
            <mat-error>This field is required</mat-error>
          </mat-form-field>

          <mat-form-field>
            <mat-label>User Type</mat-label>
            <mat-select formControlName="user_type" name="user_type">
              <mat-option *ngFor="let item of userTypesUpdated" 
              [value]="item.value">
                {{item.viewValue}}
              </mat-option>
            </mat-select>
          </mat-form-field>


          <mat-form-field  class="company_multi"  *ngIf="isCompanyRequired() && !isCompanyManagerSelected()">
            <mat-label>Company</mat-label>
            <mat-select  formControlName="company_id" name="item.name" [required]="isCompanyRequired()">
              <mat-option *ngIf="!isCompanyManagerSelected()">--</mat-option>
              <mat-option *ngFor="let item of allCompany"[value]="item.id">
                {{item.name}}
              </mat-option>
            </mat-select>
          </mat-form-field>



          <mat-form-field *ngIf="isCompanyManagerSelected()">
            <mat-label>Company</mat-label>
            <mat-select formControlName="company_id" name="company_id"  multiple [required]="isCompanyRequired()">
              <mat-option *ngFor="let item of allCompany" [value]="item.id">{{item.name}}</mat-option>
            </mat-select>
          </mat-form-field>


          <mat-form-field>
            <mat-label>Select Role</mat-label>
            <mat-select formControlName="role_id" name="role_id">
              <mat-option *ngFor="let item of allRoles" [value]="item.id">
                {{item.name}}
              </mat-option>
            </mat-select>
          </mat-form-field>

          <mat-radio-group aria-labelledby="example-radio-group-label" class="example-radio-group"
            formControlName="gender">
            <mat-label>Gender : </mat-label>

            <mat-radio-button class="example-radio-button" *ngFor="let item of allGender" [value]="item">
              {{item}}
            </mat-radio-button>
          </mat-radio-group>
          

          <mat-form-field>
            <mat-label>Status</mat-label>
            <mat-select formControlName="status" name="status">
                <mat-option *ngFor="let item of allStatus" [value]="item.value" required>
                    {{item.viewValue}}
                </mat-option>
            </mat-select>
        </mat-form-field>


          <!-- <input type="file" (change)="onFileSelected($event)" accept="image/*" enctype="multipart/form-data" /> -->

          <div class="file-up">
           <div class="img-text">
            <span>Image: </span>
            <img class="pdf-image" *ngIf="!imgurl" src="http://localhost:3000/{{selectedFile}}" alt="User Image">
            <img id="blah" *ngIf="imgurl" [src]="imgurl || 'http://placehold.it/180'" alt="your image" />
           
           </div>
            <button type="button" mat-raised-button (click)="fileInput.click()">Change Image</button>
            <input hidden (change)="onFileSelected($event)" #fileInput type="file">
            <!-- <span class="file-name">{{selectedFile}}</span> -->
           
          </div>


        </div>

        <div class="submit-area">
          <button class="btn-login" mat-raised-button color="primary" type="submit">Submit</button>
        </div>

      </form>
    </div>
  </div>
</div>


<!-- TEMPLATE NGX SPINNER-->
<ngx-spinner style="width: 100vw; height: 100vh" bdColor="rgba(0,0,0,0.25)" size="medium" color="#fff"
  type="ball-clip-rotate" [fullScreen]="true">
  <p style="color: white"> Loading... </p>
</ngx-spinner>